<!-- wp:paragraph -->
<p>The WFU WordPress CLI tool provides a comprehensive set of commands to manage WordPress environments, EC2 instances, and AWS resources. Instead of manually running complex AWS CLI commands, you can now use simple, validated commands with built-in safety features.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Installation</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Just run this one command:<br /><code>npm install -g wfuwp</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>To update to the latest version:</strong><br /><code>npm update -g wfuwp</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Prerequisites:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Node.js (most of you already have this)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>AWS CLI installed and configured with your WFU credentials</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Available Commands</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><strong>Environments supported</strong>: dev, uat, pprd, prod</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading">syncs3 - Sync S3 Assets Between Environments</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Safely sync S3 assets (uploads, media files, etc.) for WordPress sites between different environments with validation and confirmation prompts.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Usage:</strong> <code>wfuwp syncs3 &lt;site-id&gt; &lt;source-env&gt; &lt;target-env&gt; [options]</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Examples:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Basic sync with confirmation: <code>wfuwp syncs3 43 uat pprd</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Preview changes (dry run): <code>wfuwp syncs3 43 uat pprd --dry-run</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Show detailed output: <code>wfuwp syncs3 43 uat pprd --verbose</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Skip confirmation: <code>wfuwp syncs3 43 uat pprd --force</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading">listips - List EC2 Instance IP Addresses</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Display IP addresses of running EC2 instances in a specified environment, useful for SSH connections and network troubleshooting.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Usage:</strong> <code>wfuwp listips &lt;environment&gt; [options]</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Examples:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>List private IPs: <code>wfuwp listips uat</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>List public IPs: <code>wfuwp listips uat --public</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Output as JSON: <code>wfuwp listips prod --json</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Show both private and public: <code>wfuwp listips pprd --private --public</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading">sshaws - SSH Into EC2 Instances</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Easily SSH into EC2 instances in any environment with automatic key management and connection handling.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Usage:</strong> <code>wfuwp sshaws &lt;environment&gt; [options]</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Examples:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Connect to first instance: <code>wfuwp sshaws uat</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Connect to all instances: <code>wfuwp sshaws prod --all</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>List instances without connecting: <code>wfuwp sshaws dev --list</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Use custom SSH key: <code>wfuwp sshaws uat --key ~/.ssh/my_key</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Preview SSH commands: <code>wfuwp sshaws pprd --dry-run</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading">removehostkey - Clean Up SSH Host Keys</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Remove SSH host keys for EC2 instances when IP addresses change, preventing "host key verification failed" errors.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Usage:</strong> <code>wfuwp removehostkey &lt;environment&gt; [options]</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Examples:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Remove host keys: <code>wfuwp removehostkey uat</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Preview what would be removed: <code>wfuwp removehostkey prod --dry-run</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Skip confirmation: <code>wfuwp removehostkey dev -y</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Use custom known_hosts file: <code>wfuwp removehostkey pprd --known-hosts ~/.ssh/custom_hosts</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading">migrate - Complete WordPress Database Migration</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><strong>ðŸš€ NEW: Phase 2 Complete Migration Workflow</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Automated WordPress multisite database migration between environments with optional file synchronization. Handles the entire migration workflow automatically including database export, transformation, backup, import, and S3 archival.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Usage:</strong> <code>wfuwp migrate &lt;site-id&gt; --from &lt;source-env&gt; --to &lt;target-env&gt; [options]</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Prerequisites:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>WP-CLI installed and accessible</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Database configuration setup: <code>wfuwp config wizard</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>AWS CLI configured (for S3 archival and file sync)</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p><strong>Complete Migration Examples:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Basic database migration: <code>wfuwp migrate 43 --from prod --to pprd</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Migration with file sync: <code>wfuwp migrate 43 --from prod --to pprd --sync-s3</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Dry run to preview: <code>wfuwp migrate 43 --from dev --to uat --dry-run</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Force without confirmation: <code>wfuwp migrate 43 --from uat --to pprd --force</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Include main site tables: <code>wfuwp migrate 1 --from prod --to pprd --homepage</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p><strong>Migration Workflow (9 Steps):</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>âœ… Export site tables from source environment</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Import to temporary migration database</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Run URL and S3 path transformations</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Backup existing target environment tables</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Export transformed tables from migration database</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Import to target environment</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Sync WordPress files (if <code>--sync-s3</code> flag used)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Archive all SQL files to S3 with metadata</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>âœ… Clean up migration database and temporary files</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p><strong>Key Options:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li><code>--sync-s3</code> - Include WordPress file synchronization</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>--dry-run</code> - Preview all operations without making changes</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>--skip-backup</code> - Skip target environment backup (dangerous)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>--skip-s3</code> - Skip S3 archival of SQL files</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>--simple</code> - Use Phase 1 behavior (search-replace only)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>--verbose</code> - Show detailed progress and WP-CLI output</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p><strong>Configuration Management:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Interactive setup: <code>wfuwp config wizard</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Manual config: <code>wfuwp config set env.prod.host prod-db.wfu.edu</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Verify setup: <code>wfuwp config verify</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>View configuration: <code>wfuwp config list</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Safety Features</h2>
<!-- /wp:heading -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li><strong>Input validation</strong> - Validates all environment names, site IDs, and file paths</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Confirmation prompts</strong> - Asks before making changes (can be skipped with --force or --yes)</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Dry run mode</strong> - Preview changes with --dry-run before running for real</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>AWS CLI checks</strong> - Verifies your AWS setup before attempting operations</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>File existence validation</strong> - Checks for required files (SSH keys, known_hosts) before proceeding</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Error handling</strong> - Clear error messages with suggestions for resolution</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Getting Help</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><code>wfuwp --help</code>                          # General help and command list<br /><code>wfuwp &lt;command&gt; --help</code>    # Specific command help<br /><code>wfuwp --version</code>                   # Check current version</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Staying Updated</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><strong>Check for updates:</strong><br />Run <code>wfuwp --version</code> and compare with the latest version on <a href="https://www.npmjs.com/package/wfuwp">npm</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Update to latest version:</strong><br /><code>npm update -g wfuwp</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>When new features are added:</strong><br />New commands and options are regularly added. After updating, run <code>wfuwp --help</code> to see all available commands, or check this documentation page for the latest features and examples.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Command-specific help examples:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li><code>wfuwp syncs3 --help</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>wfuwp listips --help</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>wfuwp sshaws --help</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>wfuwp removehostkey --help</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Common Workflows</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><strong>Deploying changes to production:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code># 1. List instances to verify environment
wfuwp listips prod

# 2. Preview the sync operation
wfuwp syncs3 43 uat prod --dry-run

# 3. Perform the actual sync
wfuwp syncs3 43 uat prod</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p><strong>Troubleshooting SSH connections:</strong></p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code># 1. Check instance IPs
wfuwp listips uat --public

# 2. Clean up old host keys
wfuwp removehostkey uat

# 3. Test SSH connection
wfuwp sshaws uat --dry-run</code></pre>
<!-- /wp:code -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Troubleshooting</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><strong>AWS-related errors:</strong><br />Make sure your AWS CLI is configured: <code>aws configure list</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>SSH connection issues:</strong><br />Clean up old host keys: <code>wfuwp removehostkey &lt;environment&gt;</code><br />Check your SSH key permissions: <code>ls -la ~/.ssh/</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Permission errors:</strong><br />If your AWS keys have expired, <a href="https://web.dev.wfu.edu/2025/03/regenerating-aws-credentials/">follow this guide to refresh them</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The tool uses the same S3 buckets, EC2 instances, and permissions you already have - it's just a safer, easier way to manage your WordPress environments and AWS resources.</p>
<!-- /wp:paragraph -->